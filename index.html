<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Control de Accesos â€” v1.3.5</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- LOGIN -->
  <div id="loginView">
    <h1>ğŸ” Ingresar</h1>
    <label>Usuario</label>
    <input type="text" id="loginUser" placeholder="admin o guardia" />
    <label>ContraseÃ±a</label>
    <input type="password" id="loginPass" placeholder="â€¢â€¢â€¢â€¢" />
    <button onclick="doLogin()">Entrar</button>
    <p>Usuarios demo: admin/1234 Â· guardia/0000</p>
  </div>

  <!-- APP -->
  <div id="appView" style="display:none">
    <header>
      <h2>ğŸ“‹ Control de Accesos v1.3.5</h2>
      <div>
        Usuario: <span id="hdrUser">-</span> Â· Rol: <span id="hdrRol">-</span>
        <button onclick="logout()">Salir</button>
      </div>
    </header>

    <nav id="tabs">
  <button class="tabbtn active" data-target="ingreso">Ingreso LD</button>
  <button class="tabbtn" data-target="auditoria">AuditorÃ­a LD</button>
  <button class="tabbtn" data-target="materia">Materia Prima</button>
  <button class="tabbtn" data-target="preventa">AuditorÃ­a Preventa</button>
  <button class="tabbtn" data-target="programacion">ProgramaciÃ³n Preventa</button> <!-- ğŸ‘ˆ NUEVO -->
  <button class="tabbtn" data-target="liberacion">LiberaciÃ³n Preventa</button>
  <!-- âš™ï¸ ConfiguraciÃ³n aparece solo si es admin -->
 </nav>

    <!-- ====== SECCIONES ====== -->

    <!-- Ingreso LD -->
    <section id="ingreso" class="section active">
      <h3>ğŸš› Ingreso de Larga Distancia</h3>
      <form id="formIngreso">
        <input type="text" id="movilIngreso" placeholder="NÂ° CamiÃ³n" />
        <input type="text" id="choferIngreso" placeholder="Chofer" />
        <input type="text" id="cedulaIngreso" placeholder="CÃ©dula" />
        <input type="text" id="matriculaIngreso" placeholder="MatrÃ­cula" />
        <input type="text" id="destinoIngreso" placeholder="Destino" />
        <select id="estadoIngreso">
          <option>Cargado</option>
          <option>VacÃ­o</option>
        </select>
        <button type="button" onclick="guardarIngreso()">Guardar</button>
      </form>
      <table id="tablaIngreso">
        <thead>
          <tr><th>NÂ°</th><th>Chofer</th><th>CÃ©dula</th><th>MatrÃ­cula</th><th>Destino</th><th>Estado</th><th>Hora</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- AuditorÃ­a LD -->
    <section id="auditoria" class="section">
      <h3>ğŸ“ AuditorÃ­a de Larga Distancia</h3>
      <form id="formAuditoria">
        <input type="text" id="movilAud" placeholder="NÂ° CamiÃ³n" />
        <input type="text" id="choferAud" placeholder="Chofer" />
        <input type="text" id="cedulaAud" placeholder="CÃ©dula" />
        <input type="text" id="matriculaAud" placeholder="MatrÃ­cula" />
        <input type="text" id="idCargaAud" placeholder="ID Carga (7 dÃ­gitos)" />
        <input type="text" id="destinoAud" placeholder="Destino" />
        <select id="tipoCargaAud">
          <option>Transferencia</option>
          <option>Ancla</option>
        </select>
        <input type="text" id="satAud" placeholder="Saturno" oninput="autoGuardia('satAud','guardiaAud')" />
        <input type="text" id="guardiaAud" placeholder="Guardia" readonly />
        <input type="time" id="horaAud" />
        <select id="tipoAud">
          <option>Total</option>
          <option>Parcial</option>
          <option>Dirigida</option>
        </select>
        <textarea id="obsAud" placeholder="ObservaciÃ³n"></textarea>
        <button type="button" onclick="guardarAuditoria()">Guardar</button>
      </form>
      <table id="tablaAuditoria">
        <thead>
          <tr><th>NÂ°</th><th>Chofer</th><th>CÃ©dula</th><th>MatrÃ­cula</th><th>ID Carga</th><th>Destino</th><th>Tipo Carga</th><th>Saturno</th><th>Guardia</th><th>Hora</th><th>Tipo AuditorÃ­a</th><th>ObservaciÃ³n</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Materia Prima -->
    <section id="materia" class="section">
      <h3>ğŸŒ¾ Materia Prima</h3>
      <form id="formMateria">
        <input type="text" id="matMP" placeholder="MatrÃ­cula" />
        <input type="text" id="empresaMP" placeholder="Empresa" />
        <input type="text" id="choferMP" placeholder="Chofer" />
        <input type="text" id="productoMP" placeholder="Producto" />
        <input type="number" id="cantMP" placeholder="Cantidad" />
        <input type="text" id="satMP" placeholder="Saturno" oninput="autoGuardia('satMP','guardiaMP')" />
        <input type="text" id="guardiaMP" placeholder="Guardia" readonly />
        <button type="button" onclick="guardarMateria()">Guardar</button>
      </form>
      <table id="tablaMateria">
        <thead>
          <tr><th>MatrÃ­cula</th><th>Empresa</th><th>Chofer</th><th>Producto</th><th>Cantidad</th><th>Saturno</th><th>Guardia</th><th>Hora Entrada</th><th>Hora Salida</th><th>AcciÃ³n</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- AuditorÃ­a Preventa -->
    <section id="preventa" class="section">
      <h3>ğŸ“¦ AuditorÃ­a Preventa</h3>
      <form id="formPreventa">
        <input type="time" id="horaPrev" />
        <input type="text" id="cargaPrev" placeholder="Carga" />
        <input type="text" id="idCargoPrev" placeholder="ID Cargo (7 dÃ­gitos)" />
        <input type="number" id="potsPrev" placeholder="NÃºmero de Pots (opcional)" />
        <select id="turnoPrev"><option>Diurno</option><option>Nocturno</option></select>
        <input type="text" id="satPrev" placeholder="Saturno" oninput="autoGuardia('satPrev','guardiaPrev')" />
        <input type="text" id="guardiaPrev" placeholder="Guardia" readonly />
        <select id="tipoPrev"><option>Total</option><option>Parcial</option><option>Dirigida</option></select>
        <textarea id="obsPrev" placeholder="ObservaciÃ³n (opcional)"></textarea>
        <button type="button" onclick="guardarPreventa()">Guardar</button>
      </form>
      <table id="tablaPreventa">
  <thead>
    <tr>
      <th>Hora</th>
      <th>Carga</th>
      <th>ID Cargo</th>
      <th>Pots</th>
      <th>Turno</th>
      <th>Saturno</th>
      <th>Guardia</th>
      <th>Tipo AuditorÃ­a</th>
      <th>ObservaciÃ³n</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
    </section>

    <!-- ProgramaciÃ³n Preventa -->
<section id="programacion" class="section">
  <h3>ğŸ“… ProgramaciÃ³n de AuditorÃ­a Preventa</h3>
  <form id="formProg">
    <label>Fecha de programaciÃ³n:</label>
    <input type="date" id="fechaProg" required />
    <br>
    <label>Total programado:</label>
    <input type="number" id="totalProg" placeholder="Cantidad total" required />
    <br>
    <label>Cargas programadas:</label>
    <textarea id="cargasProg" placeholder="Ej: 3001,3002,3003..." required></textarea>
    <br>
    <button type="button" onclick="guardarProgramacion()">Guardar ProgramaciÃ³n</button>
  </form>

  <h4>ğŸ“‹ Programaciones cargadas</h4>
  <table id="tablaProg">
  <table id="tablaProg">
  <thead>
    <tr>
      <th>Fecha</th>
      <th>Carga</th>
      <th>ID Cargo</th>
      <th>Hora AuditorÃ­a</th>
      <th>Guardia Auditor</th>
      <th>Estado AuditorÃ­a</th>
      <th>Hora LiberaciÃ³n</th>
      <th>Guardia Liberador</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
</section>

  <!-- LiberaciÃ³n Preventa -->
<section id="liberacion" class="section">
  <h3>ğŸ”“ LiberaciÃ³n Preventa</h3>
  
  <label>Buscar por NÂ° de Carga o ID Cargo:</label>
  <input type="text" id="buscarLib" placeholder="Ej: 4001 o 1234567" />
  <button type="button" onclick="buscarLiberacion()">Buscar</button>

  <div id="resultadoLiberacion"></div>

  <!-- Campo para Saturno -->
  <div id="saturnoLiberacion" style="display:none; margin-top:10px;">
    <label>Saturno:</label>
    <input type="text" id="saturnoInput" placeholder="Ingrese Saturno" />
    <button type="button" onclick="confirmarLiberacion()">Confirmar LiberaciÃ³n</button>
  </div>

  <h4>ğŸ“‹ Historial de Liberaciones</h4>
  <table id="tablaLiberacion">
    <thead>
      <tr>
        <th>Hora</th>
        <th>Carga</th>
        <th>ID Cargo</th>
        <th>Guardia</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

    <!-- ConfiguraciÃ³n -->
<section id="config" class="section">
  <h3>âš™ï¸ ConfiguraciÃ³n</h3>
  <button onclick="abrirConfig('choferes')">Choferes</button>
  <button onclick="abrirConfig('guardias')">Guardias</button>
  <button onclick="abrirConfig('materia')">Materia Prima</button>
  <button onclick="abrirConfig('informes')">Informes</button>
  <button onclick="abrirConfig('historiales')">Historiales</button> <!-- ğŸ‘ˆ NUEVO -->
  <div id="configContent"></div>
</section>
  </div>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="data.js"></script>
  <script src="app.js"></script>
</body>
</html>